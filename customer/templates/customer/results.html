{% extends 'customer/base.html' %}

{% block title %}
Shopify
{% endblock title %}

{% block style %}
<style>
    a{
        text-decoration:none;
        color:none;
    }
</style>
{% endblock style %}

{% block content %}
    {% ifequal list_length 0 %}
    <h2>No shop/Products with this name </h2>
    <h3>You can try searching with some different keyword </h3>
    {% else %}
    <h2>{{message}}</h2>
    {% if shops %}
    <div class="container mt-5 text-center">
            {% for shop in shops %}
                    <div class="card mb-5 container" style="width: 18rem;">
                        <img class="card-img-top" src="{{ shop.image.url }}" alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title">{{shop.name}}</h5>
                            <p class="card-text">Shop Address:  {{shop.address}}</p>
                        </div>
                        <a class="btn btn-sm btn-primary" href="{% url 'customer:shop_page' shop.id %}">Visit</a>
                    </div>
            {% endfor %}
                </div>
    {% elif products %}
    <div class = "container mt-5 text-center">
        <div class="row">
          <div class = "col-md-10 offset-1">
            {% for product in products %}
        <h2>{{product.name}} is available in following shops - </h2>
            {% for shop in product.shop.all %}
            <div class="card mb-3" style="max-width: 1000px;">
                <a href="http://localhost:8000/shops/{{shop.id}}/result?product_name={{product.name}}" style="text-decoration: none; color:black;">
                  <div class="row g-3">
                    <div class="col-md-4">
                      <img src="{{product.image.url}}" class="img-fluid rounded-start" alt="Card image">
                    </div>
                    <div class="col-md-8">
                      <div class="card-body">
                        <h5 class="card-title">{{product.name}}</h5>
                        <p class="card-text">{{product.details}}</p>
                        <p class="card-text"><small class="text-muted">Shop Name: {{shop.name}}</small></p>
                      </div>
                    </div>
                      </div>
                </a>
                </div>
            {% endfor%}
        <hr/>
        {% endfor %}
          </div>
        </div>
    </div>
    {% endif %}
    {% endifequal %}
{% endblock content %}